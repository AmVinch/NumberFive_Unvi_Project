<!-- by 지아 수강 신청 페이지입니다-->
<!DOCTYPE html>
<html xmlns:th="http://www.tdymeleaf.org"	
	xmlns:layout="http://www.ultraq.net.nz/tdymeleaf/layout"  
	xmlns:sec="http://www.tdymeleaf.org/extras/spring-security"
	layout:decorate="~{layout/base_layout}"> 
<td:block layout:fragment="css"> 
<link rel="stylesheet"  td:href="@{}"> 
</td:block>

<div layout:fragment="content" > 
	<style>
		.enroll-list-table{
			font-size: 0.9rem;
		}
		
		.btn{
			font-size: 0.9rem;
		}
	</style>

	<div class="row">
		<div class="col-12">
			<!-- 수강 신청 가능 목록  -->
			<div class="row mb-3">
				<div class="col-12">
					<!-- 검색 조건 영역 -->
					<div class="row">
						<div class="col-12">
							<span>
								<label for="collNo" >단과대학</label>
								<span>
									<select onchange="changeDept();" class="changeDept"
										name="collNo" id="collNo">

										<option th:each="coll: ${collList}" th:value=${coll.collNo}
											th:text="${coll.collName}"></option>
									</select>
								</span>
							</span>
							<span>
								<label for="deptNo" >소속학과</label>
								<span>
									<select class="changeDeptList" name="deptNo" id="deptNo">
										<option th:each="dept: ${deptList}" th:value=${dept.deptNo}
											th:text="${dept.deptName}"></option>
									</select>
								</span>
							</span>

							<input type="text" name="searchValue" > <!-- 여기에 아무것도 입력을 안하고 검색을 해도 서치벨류라는 이름으로 데이터가 넘어가 그러면 넘어가긴한다 빈값으로   -->
							<input type="submit" value="검색">
						</div>
					</div>
					<!-- 목록 영역 -->	
					<div class="row">
						<div class="col-12">
							<table class="table table-striped table-hover text-center align-middle enroll-list-table">
							<!-- 	<colgroup>
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
								</colgroup> -->
								<thead>
									<tr>
										<td>#</td>
										<td>강의명</td>
										<td>학점</td>
										<td>단과대학</td>
										<td>학과</td>
										<td>교수</td>
										<td>강의 요일/시간</td>
										<td>최대인원</td>
										<td>현재인원</td>
										<td>수강 신청</td>
										<td>수강 학기</td>
									</tr>
								</thead>
								<tbody>
									<tr th:each="lec : ${lecList}">
										<td scope="row" th:text="${lec.lecNo}">1</td>
										<td>
											<a th:href="|@{/pdf/}${lec.lecturePdfVO.attachedPdfName}|" th:text="${lec.lecName}" target="_blank"></a>  <!-- 수강신청시 강의자료 열람 -->
										</td>
										<td th:text="${lec.lecScore}"></td>
										<td th:text="${lec.collNo}"></td>
										<td th:text="${lec.deptNo}"></td>
										<td th:text="${lec.empNo}"></td>
										<td th:text="${lec.lectureTimeVO.lastTime}"></td>
										<td th:text="${lec.maxNum}"></td>
										<td th:text="${lec.nowNum}"></td>
										<td th:text="${lec.semNo}"></td>
										
										<!-- <td><input type="button" value="강의 상태 수정"	data-bs-toggle="modal"  data-bs-target="#changeLecModal"></td> -->
										
										<td>
											<input class="btn btn-primary btn-sm" th:classappend="${lec.lecStatus eq 'N' ? 'disabled' : ''}" 
												type="button" value="수강 신청" th:onclick="selectLecEnroll([[${lec.lecNo}]])">
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
			<!-- 학생이 수강신청한 목록  -->
			<div class="row mt-3 mb-3">
				<div class="col-12">
					<table class="table table-striped table-hover text-center align-middle enroll-list-table">
							<!-- 	<colgroup>
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
									<col width="">
								</colgroup> -->
								<thead>
									<tr>
										<td>#</td>
										<td>강의명</td>
										<td>학점</td>
										<td>단과대학</td>
										<td>학과</td>
										<td>교수</td>
										<td>강의 요일/시간</td>
										<td>최대인원</td>
										<td>현재인원</td>
										<td>수강 신청</td>
										<td>수강 학기</td>
									</tr>
								</thead>
								<tbody>
									<tr th:each="enroll : ${enrollList}">
										<td scope="row" th:text="${enroll.lecNo}">1</td>
										<td>
										<a th:href="@{/proF/download(lecNo = ${enroll.lecNo})}" th:text="${enroll.lectureVO.lecName}" ></a> <!-- 수강신청후 강의자료 다운 -->
										</td>
										<td th:text="${enroll.lectureVO.lecScore}"></td>
										<td th:text="${enroll.lectureVO.collNo}"></td>
										<td th:text="${enroll.lectureVO.deptNo}"></td>
										<td th:text="${enroll.lectureVO.empNo}"></td>
										<td th:text="${enroll.lectureVO.lectureTimeVO.lastTime}"></td>
										<td th:text="${enroll.lectureVO.maxNum}"></td>
										<td th:text="${enroll.lectureVO.nowNum}"></td>
										<td th:text="${enroll.lectureVO.semNo}"></td>
										
										<!-- <td><input type="button" value="강의 상태 수정"	data-bs-toggle="modal"  data-bs-target="#changeLecModal"></td> -->
										
										<td>
											 <input class="btn btn-primary btn-sm" 
												type="button" value="수강 취소" th:onclick="deleteLecEnroll([[${enroll.stuNo}]],[[${enroll.lecNo}]])" > 
												
										</td>
									</tr>
								</tbody>
							</table>
				</div>
			</div>
		
		</div>
	</div>
	
	
	<script src="https://code.jquery.com/jquery-latest.min.js"></script>
	<script th:src="@{/js/paginator.js}"></script>

	<script th:src="@{/js/professor/enrollClassList.js}"></script>
	
	
</div>

</html>